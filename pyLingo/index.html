<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyLingo - Aprende Python Interactivamente</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide-react@0.264.0/dist/umd/lucide-react.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Play, RotateCcw, Lightbulb, CheckCircle, Lock, Trophy, Flame } = LucideReact;

        const TRANSLATIONS = {
            "en-US": {
                "helloWorldTitle": "Hello World",
                "helloWorldDescription": "Welcome to Python! Let's start with the traditional first program.",
                "helloWorldTask": "Write a program that prints 'Hello, World!' to the console.",
                "helloWorldHint": "Use the print() function with the text in quotes: print('Hello, World!')",
                "variablesNumbersTitle": "Variables and Numbers",
                "variablesNumbersDescription": "Learn to store and work with numbers using variables.",
                "variablesNumbersTask": "Create a variable called 'age' with value 25, then print it.",
                "variablesNumbersHint": "Create a variable: age = 25, then print it: print(age)",
                "stringVariablesTitle": "String Variables",
                "stringVariablesDescription": "Work with text data using string variables.",
                "stringVariablesTask": "Create a variable called 'name' with your name, then print 'Hello, [name]!'",
                "stringVariablesHint": "Use string concatenation or f-strings: print(f'Hello, {name}!')",
                "userInputTitle": "User Input",
                "userInputDescription": "Learn to get input from users and respond.",
                "userInputTask": "Ask for the user's favorite color and print 'Your favorite color is [color]'",
                "userInputHint": "Use input() to get user input: color = input('What is your favorite color? ')",
                "basicMathTitle": "Basic Math",
                "basicMathDescription": "Perform mathematical operations in Python.",
                "basicMathTask": "Calculate 15 + 27 and print the result.",
                "basicMathHint": "Use the + operator: print(15 + 27)",
                "conditionalsTitle": "Conditionals",
                "conditionalsDescription": "Make decisions in your code with if statements.",
                "conditionalsTask": "Check if the number 10 is greater than 5. If true, print 'Yes, 10 is greater than 5'",
                "conditionalsHint": "Use if statement: if number > 5: print('Yes, 10 is greater than 5')",
                "forLoopsTitle": "For Loops",
                "forLoopsDescription": "Repeat actions using for loops.",
                "forLoopsTask": "Print numbers from 1 to 3 using a for loop.",
                "forLoopsHint": "Use range(): for i in range(1, 4): print(i)",
                "whileLoopsTitle": "While Loops",
                "whileLoopsDescription": "Use while loops for conditional repetition.",
                "whileLoopsTask": "Print numbers from 1 to 3 using a while loop.",
                "whileLoopsHint": "Increment count each iteration: while count <= 3: print(count); count += 1",
                "listsBasicsTitle": "Lists Basics",
                "listsBasicsDescription": "Store multiple items in lists.",
                "listsBasicsTask": "Create a list with fruits ['apple', 'banana', 'orange'] and print the second item.",
                "listsBasicsHint": "Lists use zero-based indexing: fruits[1] gets the second item",
                "listOperationsTitle": "List Operations",
                "listOperationsDescription": "Add and modify list items.",
                "listOperationsTask": "Create a list [1, 2, 3], add the number 4, then print the entire list.",
                "listOperationsHint": "Use append() method: numbers.append(4), then print(numbers)",
                "functionsBasicsTitle": "Functions Basics",
                "functionsBasicsDescription": "Create reusable code with functions.",
                "functionsBasicsTask": "Define a function called 'greet' that prints 'Hello!' and then call it.",
                "functionsBasicsHint": "Use def keyword: def greet(): print('Hello!'), then call greet()",
                "functionsParametersTitle": "Functions with Parameters",
                "functionsParametersDescription": "Pass data to functions using parameters.",
                "functionsParametersTask": "Create a function 'say_hello' that takes a name parameter and prints 'Hello, [name]!'. Call it with 'World'.",
                "functionsParametersHint": "def say_hello(name): print(f'Hello, {name}!'), then call say_hello('World')",
                "dictionariesTitle": "Dictionaries",
                "dictionariesDescription": "Store key-value pairs using dictionaries.",
                "dictionariesTask": "Create a dictionary with person info: name='Alice', age=30. Print the name.",
                "dictionariesHint": "Use curly braces: person = {'name': 'Alice', 'age': 30}, access with person['name']",
                "stringMethodsTitle": "String Methods",
                "stringMethodsDescription": "Manipulate strings with built-in methods.",
                "stringMethodsTask": "Take the string 'python programming' and print it in uppercase.",
                "stringMethodsHint": "Use the upper() method: text.upper()",
                "finalChallengeTitle": "Final Challenge",
                "finalChallengeDescription": "Combine everything you've learned!",
                "finalChallengeTask": "Create a list of numbers [1,2,3,4,5], use a for loop to print each number multiplied by 2.",
                "finalChallengeHint": "Loop through the list: for num in numbers: print(num * 2)",
                "starterCodeComment": "# Write your code here\n",
                "createVariableComment": "# Create a variable and print it\n",
                "createStringComment": "# Create a string variable\n",
                "getUserInputComment": "# Get user input and respond\n",
                "calculateSumComment": "# Calculate and print the sum\n",
                "useIfStatementComment": "# Use an if statement\nnumber = 10\n",
                "useForLoopComment": "# Use a for loop to print numbers\n",
                "useWhileLoopComment": "# Use a while loop\ncount = 1\n",
                "createListComment": "# Create a list and access items\n",
                "createListAddComment": "# Create list and add item\n",
                "defineFunctionComment": "# Define and call a function\n",
                "functionParameterComment": "# Function with parameter\n",
                "createDictionaryComment": "# Create and use a dictionary\n",
                "stringMethodsComment": "# Use string methods\ntext = 'python programming'\n",
                "finalChallengeComment": "# Final challenge - combine concepts\n",
                "appTitle": "PyLingo",
                "levelsProgress": "Levels",
                "streakLabel": "streak",
                "levelButton": "Level",
                "overallProgress": "Overall Progress",
                "selectLevel": "Select Level",
                "closeButton": "Ã—",
                "taskLabel": "Task:",
                "showHint": "Show Hint",
                "hideHint": "Hide Hint",
                "pythonCodeEditor": "Python Code Editor",
                "resetButton": "Reset",
                "runCodeButton": "Run Code",
                "codeEditorPlaceholder": "Write your Python code here...",
                "previousLevel": "Previous Level",
                "nextLevel": "Next Level",
                "levelOf": "Level {current} of {total}",
                "evaluatingCode": "ðŸ¤” Evaluating your code...",
                "excellentComplete": "ðŸŽ‰ Excellent! You completed this level!",
                "notQuiteRight": "Not quite right. Let's review your solution:",
                "yourOutput": "Your output:",
                "expectedOutput": "Expected output:",
                "tipLabel": "Tip:"
            },
            "es-ES": {
                "helloWorldTitle": "Hola Mundo",
                "helloWorldDescription": "Â¡Bienvenido a Python! Comencemos con el programa tradicional.",
                "helloWorldTask": "Escribe un programa que imprima 'Â¡Hola, Mundo!' en la consola.",
                "helloWorldHint": "Usa la funciÃ³n print() con el texto entre comillas: print('Â¡Hola, Mundo!')",
                "variablesNumbersTitle": "Variables y NÃºmeros",
                "variablesNumbersDescription": "Aprende a almacenar y trabajar con nÃºmeros usando variables.",
                "variablesNumbersTask": "Crea una variable llamada 'edad' con valor 25, luego imprÃ­mela.",
                "variablesNumbersHint": "Crea una variable: edad = 25, luego imprÃ­mela: print(edad)",
                "stringVariablesTitle": "Variables de Cadena",
                "stringVariablesDescription": "Trabaja con datos de texto usando variables de cadena.",
                "stringVariablesTask": "Crea una variable llamada 'nombre' con tu nombre, luego imprime 'Â¡Hola, [nombre]!'",
                "stringVariablesHint": "Usa concatenaciÃ³n de cadenas o f-strings: print(f'Â¡Hola, {nombre}!')",
                "userInputTitle": "Entrada del Usuario",
                "userInputDescription": "Aprende a obtener entrada de los usuarios y responder.",
                "userInputTask": "Pregunta por el color favorito del usuario e imprime 'Tu color favorito es [color]'",
                "userInputHint": "Usa input() para obtener entrada del usuario: color = input('Â¿CuÃ¡l es tu color favorito? ')",
                "basicMathTitle": "MatemÃ¡ticas BÃ¡sicas",
                "basicMathDescription": "Realiza operaciones matemÃ¡ticas en Python.",
                "basicMathTask": "Calcula 15 + 27 e imprime el resultado.",
                "basicMathHint": "Usa el operador +: print(15 + 27)",
                "conditionalsTitle": "Condicionales",
                "conditionalsDescription": "Toma decisiones en tu cÃ³digo con declaraciones if.",
                "conditionalsTask": "Verifica si el nÃºmero 10 es mayor que 5. Si es verdadero, imprime 'SÃ­, 10 es mayor que 5'",
                "conditionalsHint": "Usa declaraciÃ³n if: if numero > 5: print('SÃ­, 10 es mayor que 5')",
                "forLoopsTitle": "Bucles For",
                "forLoopsDescription": "Repite acciones usando bucles for.",
                "forLoopsTask": "Imprime nÃºmeros del 1 al 3 usando un bucle for.",
                "forLoopsHint": "Usa range(): for i in range(1, 4): print(i)",
                "whileLoopsTitle": "Bucles While",
                "whileLoopsDescription": "Usa bucles while para repeticiÃ³n condicional.",
                "whileLoopsTask": "Imprime nÃºmeros del 1 al 3 usando un bucle while.",
                "whileLoopsHint": "Incrementa contador en cada iteraciÃ³n: while contador <= 3: print(contador); contador += 1",
                "listsBasicsTitle": "Fundamentos de Listas",
                "listsBasicsDescription": "Almacena mÃºltiples elementos en listas.",
                "listsBasicsTask": "Crea una lista con frutas ['manzana', 'plÃ¡tano', 'naranja'] e imprime el segundo elemento.",
                "listsBasicsHint": "Las listas usan indexaciÃ³n basada en cero: frutas[1] obtiene el segundo elemento",
                "listOperationsTitle": "Operaciones de Lista",
                "listOperationsDescription": "Agrega y modifica elementos de lista.",
                "listOperationsTask": "Crea una lista [1, 2, 3], agrega el nÃºmero 4, luego imprime toda la lista.",
                "listOperationsHint": "Usa el mÃ©todo append(): numeros.append(4), luego print(numeros)",
                "functionsBasicsTitle": "Fundamentos de Funciones",
                "functionsBasicsDescription": "Crea cÃ³digo reutilizable con funciones.",
                "functionsBasicsTask": "Define una funciÃ³n llamada 'saludar' que imprima 'Â¡Hola!' y luego llÃ¡mala.",
                "functionsBasicsHint": "Usa la palabra clave def: def saludar(): print('Â¡Hola!'), luego llama saludar()",
                "functionsParametersTitle": "Funciones con ParÃ¡metros",
                "functionsParametersDescription": "Pasa datos a funciones usando parÃ¡metros.",
                "functionsParametersTask": "Crea una funciÃ³n 'decir_hola' que tome un parÃ¡metro nombre e imprima 'Â¡Hola, [nombre]!'. LlÃ¡mala con 'Mundo'.",
                "functionsParametersHint": "def decir_hola(nombre): print(f'Â¡Hola, {nombre}!'), luego llama decir_hola('Mundo')",
                "dictionariesTitle": "Diccionarios",
                "dictionariesDescription": "Almacena pares clave-valor usando diccionarios.",
                "dictionariesTask": "Crea un diccionario con informaciÃ³n de persona: nombre='Alicia', edad=30. Imprime el nombre.",
                "dictionariesHint": "Usa llaves: persona = {'nombre': 'Alicia', 'edad': 30}, accede con persona['nombre']",
                "stringMethodsTitle": "MÃ©todos de Cadena",
                "stringMethodsDescription": "Manipula cadenas con mÃ©todos incorporados.",
                "stringMethodsTask": "Toma la cadena 'programaciÃ³n python' e imprÃ­mela en mayÃºsculas.",
                "stringMethodsHint": "Usa el mÃ©todo upper(): texto.upper()",
                "finalChallengeTitle": "DesafÃ­o Final",
                "finalChallengeDescription": "Â¡Combina todo lo que has aprendido!",
                "finalChallengeTask": "Crea una lista de nÃºmeros [1,2,3,4,5], usa un bucle for para imprimir cada nÃºmero multiplicado por 2.",
                "finalChallengeHint": "Recorre la lista: for num in numeros: print(num * 2)",
                "starterCodeComment": "# Escribe tu cÃ³digo aquÃ­\n",
                "createVariableComment": "# Crea una variable e imprÃ­mela\n",
                "createStringComment": "# Crea una variable de cadena\n",
                "getUserInputComment": "# ObtÃ©n entrada del usuario y responde\n",
                "calculateSumComment": "# Calcula e imprime la suma\n",
                "useIfStatementComment": "# Usa una declaraciÃ³n if\nnumero = 10\n",
                "useForLoopComment": "# Usa un bucle for para imprimir nÃºmeros\n",
                "useWhileLoopComment": "# Usa un bucle while\ncontador = 1\n",
                "createListComment": "# Crea una lista y accede a elementos\n",
                "createListAddComment": "# Crea lista y agrega elemento\n",
                "defineFunctionComment": "# Define y llama una funciÃ³n\n",
                "functionParameterComment": "# FunciÃ³n con parÃ¡metro\n",
                "createDictionaryComment": "# Crea y usa un diccionario\n",
                "stringMethodsComment": "# Usa mÃ©todos de cadena\ntexto = 'programaciÃ³n python'\n",
                "finalChallengeComment": "# DesafÃ­o final - combina conceptos\nnumeros = [1, 2, 3, 4, 5]\n",
                "appTitle": "PyLingo",
                "levelsProgress": "Niveles",
                "streakLabel": "racha",
                "levelButton": "Nivel",
                "overallProgress": "Progreso General",
                "selectLevel": "Seleccionar Nivel",
                "closeButton": "Ã—",
                "taskLabel": "Tarea:",
                "showHint": "Mostrar Pista",
                "hideHint": "Ocultar Pista",
                "pythonCodeEditor": "Editor de CÃ³digo Python",
                "resetButton": "Reiniciar",
                "runCodeButton": "Ejecutar CÃ³digo",
                "codeEditorPlaceholder": "Escribe tu cÃ³digo Python aquÃ­...",
                "previousLevel": "Nivel Anterior",
                "nextLevel": "Siguiente Nivel",
                "levelOf": "Nivel {current} de {total}",
                "evaluatingCode": "ðŸ¤” Evaluando tu cÃ³digo...",
                "excellentComplete": "ðŸŽ‰ Â¡Excelente! Â¡Completaste este nivel!",
                "notQuiteRight": "No estÃ¡ del todo bien. Revisemos tu soluciÃ³n:",
                "yourOutput": "Tu salida:",
                "expectedOutput": "Salida esperada:",
                "tipLabel": "Consejo:"
            }
        };

        const browserLocale = navigator.languages?.[0] || navigator.language || 'en-US';
        const findMatchingLocale = (locale) => {
            if (TRANSLATIONS[locale]) return locale;
            const lang = locale.split('-')[0];
            const match = Object.keys(TRANSLATIONS).find(key => key.startsWith(lang + '-'));
            return match || 'en-US';
        };
        const locale = findMatchingLocale(browserLocale);
        const t = (key) => TRANSLATIONS[locale]?.[key] || TRANSLATIONS['en-US'][key] || key;

        const PyLingo = () => {
            // Level definitions
            const levels = [
                {
                    id: 1,
                    title: t('helloWorldTitle'),
                    description: t('helloWorldDescription'),
                    task: t('helloWorldTask'),
                    starterCode: t('starterCodeComment'),
                    expectedOutput: locale === 'es-ES' ? "Â¡Hola, Mundo!" : "Hello, World!",
                    hint: t('helloWorldHint'),
                    solution: locale === 'es-ES' ? "print('Â¡Hola, Mundo!')" : "print('Hello, World!')"
                },
                {
                    id: 2,
                    title: t('variablesNumbersTitle'),
                    description: t('variablesNumbersDescription'),
                    task: t('variablesNumbersTask'),
                    starterCode: t('createVariableComment'),
                    expectedOutput: "25",
                    hint: t('variablesNumbersHint'),
                    solution: "age = 25\nprint(age)"
                },
                {
                    id: 3,
                    title: t('stringVariablesTitle'),
                    description: t('stringVariablesDescription'),
                    task: t('stringVariablesTask'),
                    starterCode: t('createStringComment'),
                    expectedOutput: locale === 'es-ES' ? "Â¡Hola, Python!" : "Hello, Python!",
                    hint: t('stringVariablesHint'),
                    solution: locale === 'es-ES' ? "nombre = 'Python'\nprint(f'Â¡Hola, {nombre}!')" : "name = 'Python'\nprint(f'Hello, {name}!')"
                },
                {
                    id: 4,
                    title: t('userInputTitle'),
                    description: t('userInputDescription'),
                    task: t('userInputTask'),
                    starterCode: t('getUserInputComment'),
                    expectedOutput: locale === 'es-ES' ? "Tu color favorito es azul" : "Your favorite color is blue",
                    hint: t('userInputHint'),
                    solution: locale === 'es-ES' ? "color = input('Â¿CuÃ¡l es tu color favorito? ')\nprint(f'Tu color favorito es {color}')" : "color = input('What is your favorite color? ')\nprint(f'Your favorite color is {color}')"
                },
                {
                    id: 5,
                    title: t('basicMathTitle'),
                    description: t('basicMathDescription'),
                    task: t('basicMathTask'),
                    starterCode: t('calculateSumComment'),
                    expectedOutput: "42",
                    hint: t('basicMathHint'),
                    solution: "print(15 + 27)"
                },
                {
                    id: 6,
                    title: t('conditionalsTitle'),
                    description: t('conditionalsDescription'),
                    task: t('conditionalsTask'),
                    starterCode: t('useIfStatementComment'),
                    expectedOutput: locale === 'es-ES' ? "SÃ­, 10 es mayor que 5" : "Yes, 10 is greater than 5",
                    hint: t('conditionalsHint'),
                    solution: locale === 'es-ES' ? "numero = 10\nif numero > 5:\n    print('SÃ­, 10 es mayor que 5')" : "number = 10\nif number > 5:\n    print('Yes, 10 is greater than 5')"
                },
                {
                    id: 7,
                    title: t('forLoopsTitle'),
                    description: t('forLoopsDescription'),
                    task: t('forLoopsTask'),
                    starterCode: t('useForLoopComment'),
                    expectedOutput: "1\n2\n3",
                    hint: t('forLoopsHint'),
                    solution: "for i in range(1, 4):\n    print(i)"
                },
                {
                    id: 8,
                    title: t('whileLoopsTitle'),
                    description: t('whileLoopsDescription'),
                    task: t('whileLoopsTask'),
                    starterCode: t('useWhileLoopComment'),
                    expectedOutput: "1\n2\n3",
                    hint: t('whileLoopsHint'),
                    solution: "count = 1\nwhile count <= 3:\n    print(count)\n    count += 1"
                },
                {
                    id: 9,
                    title: t('listsBasicsTitle'),
                    description: t('listsBasicsDescription'),
                    task: t('listsBasicsTask'),
                    starterCode: t('createListComment'),
                    expectedOutput: locale === 'es-ES' ? "plÃ¡tano" : "banana",
                    hint: t('listsBasicsHint'),
                    solution: locale === 'es-ES' ? "frutas = ['manzana', 'plÃ¡tano', 'naranja']\nprint(frutas[1])" : "fruits = ['apple', 'banana', 'orange']\nprint(fruits[1])"
                },
                {
                    id: 10,
                    title: t('listOperationsTitle'),
                    description: t('listOperationsDescription'),
                    task: t('listOperationsTask'),
                    starterCode: t('createListAddComment'),
                    expectedOutput: "[1, 2, 3, 4]",
                    hint: t('listOperationsHint'),
                    solution: locale === 'es-ES' ? "numeros = [1, 2, 3]\nnumeros.append(4)\nprint(numeros)" : "numbers = [1, 2, 3]\nnumbers.append(4)\nprint(numbers)"
                },
                {
                    id: 11,
                    title: t('functionsBasicsTitle'),
                    description: t('functionsBasicsDescription'),
                    task: t('functionsBasicsTask'),
                    starterCode: t('defineFunctionComment'),
                    expectedOutput: locale === 'es-ES' ? "Â¡Hola!" : "Hello!",
                    hint: t('functionsBasicsHint'),
                    solution: locale === 'es-ES' ? "def saludar():\n    print('Â¡Hola!')\n\nsaludar()" : "def greet():\n    print('Hello!')\n\ngreet()"
                },
                {
                    id: 12,
                    title: t('functionsParametersTitle'),
                    description: t('functionsParametersDescription'),
                    task: t('functionsParametersTask'),
                    starterCode: t('functionParameterComment'),
                    expectedOutput: locale === 'es-ES' ? "Â¡Hola, Mundo!" : "Hello, World!",
                    hint: t('functionsParametersHint'),
                    solution: locale === 'es-ES' ? "def decir_hola(nombre):\n    print(f'Â¡Hola, {nombre}!')\n\ndecir_hola('Mundo')" : "def say_hello(name):\n    print(f'Hello, {name}!')\n\nsay_hello('World')"
                },
                {
                    id: 13,
                    title: t('dictionariesTitle'),
                    description: t('dictionariesDescription'),
                    task: t('dictionariesTask'),
                    starterCode: t('createDictionaryComment'),
                    expectedOutput: locale === 'es-ES' ? "Alicia" : "Alice",
                    hint: t('dictionariesHint'),
                    solution: locale === 'es-ES' ? "persona = {'nombre': 'Alicia', 'edad': 30}\nprint(persona['nombre'])" : "person = {'name': 'Alice', 'age': 30}\nprint(person['name'])"
                },
                {
                    id: 14,
                    title: t('stringMethodsTitle'),
                    description: t('stringMethodsDescription'),
                    task: t('stringMethodsTask'),
                    starterCode: t('stringMethodsComment'),
                    expectedOutput: locale === 'es-ES' ? "PROGRAMACIÃ“N PYTHON" : "PYTHON PROGRAMMING",
                    hint: t('stringMethodsHint'),
                    solution: locale === 'es-ES' ? "texto = 'programaciÃ³n python'\nprint(texto.upper())" : "text = 'python programming'\nprint(text.upper())"
                },
                {
                    id: 15,
                    title: t('finalChallengeTitle'),
                    description: t('finalChallengeDescription'),
                    task: t('finalChallengeTask'),
                    starterCode: t('finalChallengeComment'),
                    expectedOutput: "2\n4\n6\n8\n10",
                    hint: t('finalChallengeHint'),
                    solution: locale === 'es-ES' ? "numeros = [1, 2, 3, 4, 5]\nfor num in numeros:\n    print(num * 2)" : "numbers = [1, 2, 3, 4, 5]\nfor num in numbers:\n    print(num * 2)"
                }
            ];

            // State management
            const [currentLevel, setCurrentLevel] = useState(1);
            const [userCode, setUserCode] = useState(levels[0].starterCode);
            const [completedLevels, setCompletedLevels] = useState(new Set());
            const [showHint, setShowHint] = useState(false);
            const [feedback, setFeedback] = useState(null);
            const [streak, setStreak] = useState(0);
            const [showLevelSelector, setShowLevelSelector] = useState(false);

            // Update user code when level changes
            useEffect(() => {
                const level = levels.find(l => l.id === currentLevel);
                setUserCode(level.starterCode);
                setShowHint(false);
                setFeedback(null);
            }, [currentLevel]);

            // Simple code execution simulation
            const executeCode = (code) => {
                try {
                    // Simulate Python print statements
                    const printRegex = /print\((.*?)\)/g;
                    const matches = [];
                    let match;
                    
                    while ((match = printRegex.exec(code)) !== null) {
                        let value = match[1].trim();
                        
                        // Handle different types of print statements
                        if (value.startsWith("'") && value.endsWith("'")) {
                            // String literal
                            matches.push(value.slice(1, -1));
                        } else if (value.startsWith('"') && value.endsWith('"')) {
                            // String literal
                            matches.push(value.slice(1, -1));
                        } else if (value.match(/^\d+$/)) {
                            // Number literal
                            matches.push(value);
                        } else if (value.includes('f\'') || value.includes('f"')) {
                            // F-string simulation
                            if (code.includes('nombre = \'Python\'') || code.includes('nombre = "Python"') || code.includes('name = \'Python\'') || code.includes('name = "Python"')) {
                                matches.push(locale === 'es-ES' ? 'Â¡Hola, Python!' : 'Hello, Python!');
                            }
                            if (code.includes('color = input(')) {
                                matches.push(locale === 'es-ES' ? 'Tu color favorito es azul' : 'Your favorite color is blue');
                            }
                        } else if (value.includes('+')) {
                            // Mathematical operations
                            try {
                                const result = eval(value);
                                matches.push(result.toString());
                            } catch {
                                matches.push(value);
                            }
                        } else if (code.includes('frutas[1]') || code.includes('fruits[1]')) {
                            matches.push(locale === 'es-ES' ? 'plÃ¡tano' : 'banana');
                        } else if (code.includes('[1, 2, 3, 4]')) {
                            matches.push('[1, 2, 3, 4]');
                        } else if (code.includes('persona[\'nombre\']') || code.includes('person[\'name\']')) {
                            matches.push(locale === 'es-ES' ? 'Alicia' : 'Alice');
                        } else if (code.includes('.upper()')) {
                            matches.push(locale === 'es-ES' ? 'PROGRAMACIÃ“N PYTHON' : 'PYTHON PROGRAMMING');
                        } else {
                            // Variable or expression
                            if (code.includes('edad = 25') || code.includes('age = 25')) matches.push('25');
                            if (code.includes('Â¡Hola!') || code.includes('Hello!')) matches.push(locale === 'es-ES' ? 'Â¡Hola!' : 'Hello!');
                            if (code.includes('Â¡Hola, Mundo!') || code.includes('Hello, World!')) matches.push(locale === 'es-ES' ? 'Â¡Hola, Mundo!' : 'Hello, World!');
                            if (code.includes('SÃ­, 10 es mayor que 5') || code.includes('Yes, 10 is greater than 5')) matches.push(locale === 'es-ES' ? 'SÃ­, 10 es mayor que 5' : 'Yes, 10 is greater than 5');
                        }
                    }

                    // Handle loops
                    if (code.includes('for i in range(1, 4)')) {
                        matches.push('1', '2', '3');
                    }
                    if (code.includes('while count <= 3') || code.includes('while contador <= 3')) {
                        matches.push('1', '2', '3');
                    }
                    if ((code.includes('for num in numbers:') || code.includes('for num in numeros:')) && code.includes('print(num * 2)')) {
                        matches.push('2', '4', '6', '8', '10');
                    }

                    return matches.join('\n');
                } catch (error) {
                    return "Error: " + error.message;
                }
            };

            const handleSubmit = () => {
                const level = levels.find(l => l.id === currentLevel);
                
                // Set loading state
                setFeedback({
                    type: 'loading',
                    message: t('evaluatingCode')
                });

                // Simple output comparison (since we don't have Claude API in static version)
                setTimeout(() => {
                    const output = executeCode(userCode);
                    const isCorrect = output.trim() === level.expectedOutput.trim();

                    if (isCorrect) {
                        setCompletedLevels(prev => new Set([...prev, currentLevel]));
                        setStreak(prev => prev + 1);
                        setFeedback({
                            type: 'success',
                            message: t('excellentComplete'),
                            output: output
                        });
                    } else {
                        setStreak(0);
                        setFeedback({
                            type: 'error',
                            message: t('notQuiteRight'),
                            output: output,
                            expected: level.expectedOutput,
                            explanation: level.hint
                        });
                    }
                }, 1000);
            };

            const handleReset = () => {
                const level = levels.find(l => l.id === currentLevel);
                setUserCode(level.starterCode);
                setFeedback(null);
                setShowHint(false);
            };

            const handleLevelChange = (levelId) => {
                // Only allow access to level 1 or completed levels or the next uncompleted level
                const maxUnlockedLevel = Math.max(1, Math.max(...Array.from(completedLevels)) + 1);
                if (levelId <= maxUnlockedLevel) {
                    setCurrentLevel(levelId);
                    setShowLevelSelector(false);
                }
            };

            const currentLevelData = levels.find(l => l.id === currentLevel);
            const progressPercentage = (completedLevels.size / levels.length) * 100;

            return React.createElement("div", { className: "min-h-screen bg-gradient-to-br from-gray-900 to-gray-800" },
                // Header
                React.createElement("header", { className: "bg-gray-800 shadow-lg border-b-2 border-blue-400" },
                    React.createElement("div", { className: "max-w-7xl mx-auto px-4 py-4" },
                        React.createElement("div", { className: "flex items-center justify-between" },
                            React.createElement("div", { className: "flex items-center space-x-4" },
                                React.createElement("h1", { className: "text-3xl font-bold text-blue-400" }, t('appTitle')),
                                React.createElement("div", { className: "hidden md:flex items-center space-x-2 text-gray-300" },
                                    React.createElement(Trophy, { className: "w-5 h-5" }),
                                    React.createElement("span", { className: "font-medium" }, `${completedLevels.size}/${levels.length} ${t('levelsProgress')}`)
                                )
                            ),
                            React.createElement("div", { className: "flex items-center space-x-4" },
                                React.createElement("div", { className: "flex items-center space-x-2 bg-orange-900 px-3 py-1 rounded-full" },
                                    React.createElement(Flame, { className: "w-4 h-4 text-orange-400" }),
                                    React.createElement("span", { className: "font-bold text-orange-200" }, streak),
                                    React.createElement("span", { className: "text-orange-300 text-sm" }, t('streakLabel'))
                                ),
                                React.createElement("button", {
                                    onClick: () => setShowLevelSelector(!showLevelSelector),
                                    className: "bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-500 transition-colors font-medium"
                                }, `${t('levelButton')} ${currentLevel}`)
                            )
                        ),
                        // Progress Bar
                        React.createElement("div", { className: "mt-4" },
                            React.createElement("div", { className: "flex justify-between text-sm text-gray-300 mb-1" },
                                React.createElement("span", null, t('overallProgress')),
                                React.createElement("span", null, `${Math.round(progressPercentage)}%`)
                            ),
                            React.createElement("div", { className: "w-full bg-gray-700 rounded-full h-2" },
                                React.createElement("div", {
                                    className: "bg-blue-500 h-2 rounded-full transition-all duration-500",
                                    style: { width: `${progressPercentage}%` }
                                })
                            )
                        )
                    )
                ),

                // Level Selector Modal
                showLevelSelector && React.createElement("div", { className: "fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4" },
                    React.createElement("div", { className: "bg-gray-800 rounded-xl max-w-4xl w-full max-h-[80vh] overflow-y-auto border border-gray-700" },
                        React.createElement("div", { className: "p-6" },
                            React.createElement("div", { className: "flex justify-between items-center mb-6" },
                                React.createElement("h2", { className: "text-2xl font-bold text-white" }, t('selectLevel')),
                                React.createElement("button", {
                                    onClick: () => setShowLevelSelector(false),
                                    className: "text-gray-400 hover:text-gray-200 text-xl"
                                }, t('closeButton'))
                            ),
                            React.createElement("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" },
                                levels.map((level) => {
                                    const isCompleted = completedLevels.has(level.id);
                                    const isLocked = level.id > Math.max(1, Math.max(...Array.from(completedLevels)) + 1);
                                    const isCurrentLevel = level.id === currentLevel;
                                    
                                    return React.createElement("button", {
                                        key: level.id,
                                        onClick: () => !isLocked && handleLevelChange(level.id),
                                        disabled: isLocked,
                                        className: `p-4 rounded-lg border-2 text-left transition-all ${
                                            isCurrentLevel
                                                ? 'border-blue-400 bg-gray-700'
                                                : isCompleted
                                                ? 'border-green-400 bg-gray-700 hover:bg-gray-600'
                                                : isLocked
                                                ? 'border-gray-600 bg-gray-800 cursor-not-allowed opacity-50'
                                                : 'border-gray-600 bg-gray-800 hover:border-blue-400 hover:bg-gray-700'
                                        }`
                                    },
                                        React.createElement("div", { className: "flex items-center justify-between mb-2" },
                                            React.createElement("span", { className: "font-bold text-sm text-gray-300" }, `${t('levelButton')} ${level.id}`),
                                            isCompleted ? React.createElement(CheckCircle, { className: "w-5 h-5 text-green-400" })
                                            : isLocked ? React.createElement(Lock, { className: "w-5 h-5 text-gray-500" }) : null
                                        ),
                                        React.createElement("h3", { className: "font-semibold text-white mb-1" }, level.title),
                                        React.createElement("p", { className: "text-xs text-gray-400 line-clamp-2" }, level.description)
                                    );
                                })
                            )
                        )
                    )
                ),

                // Main Content
                React.createElement("main", { className: "max-w-7xl mx-auto px-4 py-8" },
                    React.createElement("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-8" },
                        // Left Panel - Instructions
                        React.createElement("div", { className: "bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-700" },
                            React.createElement("div", { className: "mb-6" },
                                React.createElement("div", { className: "flex items-center justify-between mb-4" },
                                    React.createElement("h2", { className: "text-2xl font-bold text-white" },
                                        `${t('levelButton')} ${currentLevel}: ${currentLevelData.title}`
                                    ),
                                    completedLevels.has(currentLevel) && React.createElement(CheckCircle, { className: "w-6 h-6 text-green-400" })
                                ),
                                React.createElement("p", { className: "text-gray-300 mb-4" }, currentLevelData.description),
                                React.createElement("div", { className: "bg-blue-900 border-l-4 border-blue-400 p-4 rounded-r-lg" },
                                    React.createElement("h3", { className: "font-semibold text-blue-200 mb-2" }, t('taskLabel')),
                                    React.createElement("p", { className: "text-blue-100" }, currentLevelData.task)
                                )
                            ),

                            // Hint Section
                            React.createElement("div", { className: "mb-6" },
                                React.createElement("button", {
                                    onClick: () => setShowHint(!showHint),
                                    className: "flex items-center space-x-2 text-yellow-400 hover:text-yellow-300 transition-colors"
                                },
                                    React.createElement(Lightbulb, { className: "w-5 h-5" }),
                                    React.createElement("span", { className: "font-medium" },
                                        showHint ? t('hideHint') : t('showHint')
                                    )
                                ),
                                showHint && React.createElement("div", { className: "mt-3 bg-yellow-900 border-l-4 border-yellow-500 p-4 rounded-r-lg" },
                                    React.createElement("p", { className: "text-yellow-100" }, currentLevelData.hint)
                                )
                            ),

                            // Feedback
                            feedback && React.createElement("div", {
                                className: `p-4 rounded-lg mb-6 border ${
                                    feedback.type === 'success' 
                                        ? 'bg-green-900 border-green-500' 
                                        : feedback.type === 'loading'
                                        ? 'bg-blue-900 border-blue-500'
                                        : 'bg-red-900 border-red-500'
                                }`
                            },
                                React.createElement("p", {
                                    className: `font-medium mb-2 ${
                                        feedback.type === 'success' 
                                            ? 'text-green-200' 
                                            : feedback.type === 'loading'
                                            ? 'text-blue-200'
                                            : 'text-red-200'
                                    }`
                                }, feedback.message),
                                
                                feedback.explanation && React.createElement("div", { className: "mb-2" },
                                    React.createElement("p", { className: "text-sm text-gray-300" }, feedback.explanation)
                                ),
                                
                                feedback.output && React.createElement("div", { className: "mb-2" },
                                    React.createElement("p", { className: "text-sm text-gray-400 mb-1" }, t('yourOutput')),
                                    React.createElement("pre", { className: "bg-gray-700 p-2 rounded text-sm font-mono text-gray-100" }, feedback.output)
                                ),
                                
                                feedback.expected && React.createElement("div", { className: "mb-2" },
                                    React.createElement("p", { className: "text-sm text-gray-400 mb-1" }, t('expectedOutput')),
                                    React.createElement("pre", { className: "bg-gray-700 p-2 rounded text-sm font-mono text-gray-100" }, feedback.expected)
                                ),
                                
                                feedback.hint && feedback.type === 'error' && React.createElement("div", { className: "mt-3 p-3 bg-blue-800 rounded" },
                                    React.createElement("p", { className: "text-sm text-blue-200" }, 
                                        React.createElement("strong", null, `${t('tipLabel')} `), feedback.hint
                                    )
                                )
                            )
                        ),

                        // Right Panel - Code Editor
                        React.createElement("div", { className: "bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700" },
                            React.createElement("div", { className: "bg-gray-900 text-white p-4 flex items-center justify-between border-b border-gray-700" },
                                React.createElement("h3", { className: "font-semibold" }, t('pythonCodeEditor')),
                                React.createElement("div", { className: "flex items-center space-x-2" },
                                    React.createElement("button", {
                                        onClick: handleReset,
                                        className: "flex items-center space-x-1 bg-gray-700 hover:bg-gray-600 px-3 py-1 rounded transition-colors text-sm"
                                    },
                                        React.createElement(RotateCcw, { className: "w-4 h-4" }),
                                        React.createElement("span", null, t('resetButton'))
                                    ),
                                    React.createElement("button", {
                                        onClick: handleSubmit,
                                        className: "flex items-center space-x-1 bg-green-600 hover:bg-green-500 px-3 py-1 rounded transition-colors text-sm"
                                    },
                                        React.createElement(Play, { className: "w-4 h-4" }),
                                        React.createElement("span", null, t('runCodeButton'))
                                    )
                                )
                            ),
                            React.createElement("div", { className: "p-0" },
                                React.createElement("textarea", {
                                    value: userCode,
                                    onChange: (e) => setUserCode(e.target.value),
                                    className: "w-full h-96 p-4 font-mono text-sm bg-gray-900 text-green-400 border-0 resize-none focus:outline-none focus:ring-0",
                                    placeholder: t('codeEditorPlaceholder'),
                                    spellCheck: false
                                })
                            )
                        )
                    ),

                    // Navigation
                    React.createElement("div", { className: "mt-8 flex justify-between items-center" },
                        React.createElement("button", {
                            onClick: () => currentLevel > 1 && handleLevelChange(currentLevel - 1),
                            disabled: currentLevel === 1,
                            className: "px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                        }, t('previousLevel')),
                        
                        React.createElement("div", { className: "text-center" },
                            React.createElement("p", { className: "text-gray-300" },
                                t('levelOf').replace('{current}', currentLevel).replace('{total}', levels.length)
                            )
                        ),
                        
                        React.createElement("button", {
                            onClick: () => {
                                if (completedLevels.has(currentLevel) && currentLevel < levels.length) {
                                    handleLevelChange(currentLevel + 1);
                                }
                            },
                            disabled: !completedLevels.has(currentLevel) || currentLevel === levels.length,
                            className: "px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                        }, t('nextLevel'))
                    )
                )
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(PyLingo));
    </script>
</body>
</html>